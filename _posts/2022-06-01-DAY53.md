---
layout: single
title: "[DAY-53] React (6)"
categories: [devCourse, TIL]
last_modified_at: 2022-06-01
excerpt: "ğŸ˜ŠTIL : ì»´í¬ë„ŒíŠ¸ ì‹¤ìŠµ & ì‚¬ìš©ì ì •ì˜ Hook & ëŠë‚€ì  ì£¼ì ˆì£¼ì ˆ.."
header:
  teaser: https://user-images.githubusercontent.com/72294509/171359385-1839ce7b-d1aa-4d49-ab55-0dca46758445.png
---

![Untitled](https://user-images.githubusercontent.com/72294509/171359385-1839ce7b-d1aa-4d49-ab55-0dca46758445.png){: .align-center}

> ğŸ˜‰ **í—·ê°ˆë ¸ë˜ & ëª°ëë˜ ë¶€ë¶„ë“¤ë§Œ ì •ë¦¬**í•˜ëŠ” ë‚˜ë§Œì˜ TIL<br>
> ğŸ˜¯ ëª¨ë“  ê°•ì˜ ë‚´ìš©ì€ ì ì§€ ì•Šì•„ìš”!

<p class='notice--success'>
	<strong>ì˜¤ëŠ˜ì˜ ì†Œê°ì€?</strong><br>
	Notion í´ë¡œë‹ í”„ë¡œì íŠ¸ë¥¼ ê³„ì† ë¦¬íŒ©í† ë§ ì¤‘ì´ë‹¤. <br>
	ì§€ê¸ˆì€ APIë¥¼ ê°ˆì•„ë¼ì› ë‹¤ ğŸ˜‰<br>
	í•˜ì§€ë§Œ ì•„ì§ https ì„¤ì •ì„ ëª»í•´ ë¡œì»¬ì—ì„œë§Œ í™•ì¸ ê°€ëŠ¥í•˜ë‹¤. í•˜í•˜í•˜..<br>
	<br>
	Modal ì°½ ì™¸ë¶€ë¥¼ í´ë¦­í–ˆì„ ë•Œ, ì°½ì´ êº¼ì§€ëŠ” ê¸°ëŠ¥ì„ Hookìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆêµ¬ë‚˜. <br>
	React ì»´í¬ë„ŒíŠ¸ì™€ í›…ì˜ ë‹¨ìœ„ëŠ” ë°°ìš¸ìˆ˜ë¡ ì‹ ê¸°í•˜ë‹¤..<br>
	<br>
	ê³ ì–‘ì´ ì‚¬ì§„ì²© ë•Œ ë‚  ê´´ë¡­í˜”ë˜(?) BreadCrumbë¥¼ ì»´í¬ë„ŒíŠ¸ ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•˜ê³  <br>
	ë‚´ë¶€ì— ìˆëŠ” Item ë˜í•œ ì»´í¬ë„ŒíŠ¸ ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•˜ë‹ˆ ì™œ ì§„ì‘ì— ì´ë ‡ê²Œ ë¶„ë¦¬í•˜ì§€ ëª»í–ˆì„ê¹Œ ë„ˆë¬´ í¸ë¦¬í–ˆë‹¤.<br>
	<br>
	ê¸°ì¡´ì— Spacerë¥¼ ì‹¤ìŠµí•˜ë©° Flex, Grid ë˜í•œ ì»´í¬ë„ŒíŠ¸ë¡œ ë§Œë“¤ì–´ë³¼ ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì„ í–ˆì—ˆë‹¤. <br>
	ì˜¤ëŠ˜ Fluxë¥¼ êµ¬í˜„í•˜ë©° ê¶ê¸ˆì¦ì´ í’€ë ¸ë‹¤.<br>
	ì¡°ê¸ˆ ë” ê³µë¶€ í•´ë´ì•¼ê² ë‹¤. ì•„ì§ Context APIë¥¼ ë§ì´ ì‚¬ìš©í•´ë³´ì§€ ì•Šì•„ì„œì¼ê¹Œ, gutter ë¶€ë¶„ì´ ì´í•´ê°€ ì˜ ê°€ì§€ ì•ŠëŠ”ë‹¤. 
</p>

<br><br><br>

# [1] ì»´í¬ë„ŒíŠ¸ ì‹¤ìŠµ

## Flux

Providerì˜ ì´í•´ê°€ ë” í•„ìš”í•˜ë‹¤.

ê·¼ë° ì˜ë¬¸ì ì´ ìˆë‹¤. Flux ë””ë ‰í† ë¦¬ ë‚´ë¶€ì— Providerë„ í•¨ê»˜ ì¡´ì¬í•œë‹¤.

Flux Component ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ProviderëŠ” ê°™ì€ ë””ë ‰í† ë¦¬ì— ë¬¶ì–´ë„ ë˜ëŠ”ê±¸ê¹Œ?

<br>

ì•„ì§ ë””ë ‰í† ë¦¬ ë‚˜ëˆ„ëŠ” ê²ƒì— ìµìˆ™í•˜ì§€ ì•Šë‹¤.

ìŠ¤í† ë¦¬ íŒŒì¼ì´ë‚˜ ìŠ¤íƒ€ì¼ íŒŒì¼ì´ ê°™ì€ ë””ë ‰í† ë¦¬ ë‚´ë¶€ì— ìˆì–´ì•¼ í•œë‹¤ëŠ” ì˜ê²¬ì´ ë°˜, ë³„ë„ì˜ ë””ë ‰í† ë¦¬ì— ìˆì–´ì•¼ í•œë‹¤ëŠ” ì˜ê²¬ì´ ë°˜.

ì´ê±´ ë‚˜ì¤‘ì— íŒ€ ë‹¨ìœ„ë¡œ í˜‘ì—…ì„ í•  ë•Œ ì •í•˜ëŠ” ì‚¬í•­ë“¤ì¼ê¹Œ?

<br>

```jsx
{% raw %}
// Row.js
import styled from "@emotion/styled";
import { useMemo } from "react";
import FluxProvider from "./FluxProvider";

const AlignToCssValue = {
  top: "flex-start",
  middle: "center",
  bottom: "flex-end",
};

const StyleRow = styled.div`
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  box-sizing: border-box;

  justify-content: ${({ justify }) => justify};
  align-items: ${({ align }) => AlignToCssValue[align]};
`;

const Row = ({ children, justify, align, gutter, ...props }) => {
  const gutterStyle = useMemo(() => {
    if (Array.isArray(gutter)) {
      const horizontalGutter = gutter[0];
      const verticalGutter = gutter[1];
      return {
        marginTop: `-${verticalGutter / 2}px`,
        marginBottom: `-${verticalGutter / 2}px`,
        marginLeft: `-${horizontalGutter / 2}px`,
        marginRight: `-${horizontalGutter / 2}px`,
      };
    }
    return {
      marginLeft: `-${gutter / 2}px`,
      marginRight: `-${gutter / 2}px`,
    };
  }, [gutter]);

  return (
    <FluxProvider gutter={gutter}>
      <StyleRow
        {...props}
        align={align}
        justify={justify}
        style={{ ...props.style, ...gutterStyle }}
      >
        {children}
      </StyleRow>
    </FluxProvider>
  );
};

export default Row;

// Col.js
import styled from "@emotion/styled";
import { useMemo } from "react";
import { useFlux } from "./FluxProvider";

const StyledCol = styled.div`
  max-width: 100%fit-content;
  box-sizing: border-box;

  width: ${({ span }) => span && `${(span / 12) * 100}%`};
  margin-left: ${({ offset }) => offset && `${(offset / 12) * 100}%`};
`;

const Col = ({ children, span, offset, ...props }) => {
  const { gutter } = useFlux();
  const gutterStyle = useMemo(() => {
    if (Array.isArray(gutter)) {
      const horizontalGutter = gutter[0];
      const verticalGutter = gutter[1];
      return {
        paddingTop: `${verticalGutter / 2}px`,
        paddingBottom: `${verticalGutter / 2}px`,
        paddingLeft: `${horizontalGutter / 2}px`,
        paddingRight: `${horizontalGutter / 2}px`,
      };
    }
    return {
      paddingLeft: `${gutter / 2}px`,
      paddingRight: `${gutter / 2}px`,
    };
  }, [gutter]);

  return (
    <StyledCol
      {...props}
      span={span}
      offset={offset}
      style={{ ...props.style, ...gutterStyle }}
    >
      {children}
    </StyledCol>
  );
};

export default Col;
{% endraw %}
```

```jsx
{% raw %}
// FluxProvider
import { createContext, useContext } from "react";

const FluxContext = createContext();
export const useFlux = () => useContext(FluxContext);

const FluxProvider = ({ children, gutter = 0 }) => {
  return (
    <FluxContext.Provider value={{ gutter }}>{children}</FluxContext.Provider>
  );
};

export default FluxProvider;
{% endraw %}
```

```jsx
// index.js
import Row from "./Row";
import Col from "./Col";

const Flux = {
  Row,
  Col,
};

export default Flux;
```

```jsx
{% raw %}
// Flux.stories.js
import Flux from "../../components/_BasicComponent/Flux";

const { Row, Col } = Flux;

export default {
  title: "Component/Flux",
  component: Flux,
};

const Box = () => {
  return (
    <div
      style={{
        backgroundColor: "#44b",
        width: "100%",
        height: 18,
        color: "white",
        textAlign: "center",
        borderRadius: 8,
      }}
    >
      Box
    </div>
  );
};

export const Default = () => {
  return (
    <Row gutter={[2, 4]}>
      <Col span={4}>
        <Box />
      </Col>
      <Col span={4}>
        <Box />
      </Col>
      <Col span={4}>
        <Box />
      </Col>
      <Col span={2}>
        <Box />
      </Col>
      <Col span={8}>
        <Box />
      </Col>
      <Col span={2}>
        <Box />
      </Col>
    </Row>
  );
};
{% endraw %}
```

<br><br>

## Breadcrumb

```jsx
// BreadcrumbItem.js
import styled from "@emotion/styled";
import Text from "../Text";
import Icon from "../Icon";

const BreadcrumbItemContainer = styled.div`
  display: inline-flex;
  align-items: center;
`;

const Anchor = styled.a`
  color: inherit;
  text-decoration: none;
`;

const BreadcrumbItem = ({ children, href, active, __TYPE, ...props }) => {
  return (
    <BreadcrumbItemContainer {...props}>
      <Anchor href={href}>
        <Text size={14} strong={active}>
          {children}
        </Text>
      </Anchor>
      {!active && <Icon name="chevron-right" size={22} strokeWidth={1} />}
    </BreadcrumbItemContainer>
  );
};

BreadcrumbItem.defaultProps = {
  __TYPE: "Breadcrumb.Item",
};

BreadcrumbItem.propTypes = {
  __TYPE: "Breadcrumb.Item",
};

export default BreadcrumbItem;
```

```jsx
// index.js
import styled from "@emotion/styled";
import React from "react";
import BreadcrumbItem from "./BreadcrumbItem";

const BreadcrumbContainer = styled.nav`
  display: inline-block;
`;

const Breadcrumb = ({ children, ...props }) => {
  const items = React.Children.toArray(children)
    .filter((element) => {
      if (
        React.isValidElement(element) &&
        element.props.__TYPE === "Breadcrumb.Item"
      ) {
        return true;
      }

      console.warn("Only accepts Breadcrumb.Item as it's children.");
      return false;
    })
    .map((element, index, elements) => {
      return React.cloneElement(element, {
        ...element.props,
        active: index === elements.length - 1,
      });
    });

  return <BreadcrumbContainer>{items}</BreadcrumbContainer>;
};

Breadcrumb.Item = BreadcrumbItem;

export default Breadcrumb;
```

```jsx
// Breadcrumb.stories.js
import Breadcrumb from "../../components/_BasicComponent/Breadcrumb";

export default {
  title: "Component/Breadcrumb",
  component: Breadcrumb,
};

export const Default = () => {
  return (
    <Breadcrumb>
      <Breadcrumb.Item>Home</Breadcrumb.Item>
      <Breadcrumb.Item>item1</Breadcrumb.Item>
      <Breadcrumb.Item>item2</Breadcrumb.Item>
      <Breadcrumb.Item>item3</Breadcrumb.Item>
    </Breadcrumb>
  );
};
```

<br><br>

## Tab

```jsx
// TabItem.js
import PropTypes from "prop-types";
import styled from "@emotion/styled";
import Text from "../Text";

const TabItemWrapper = styled.div`
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 140px;
  height: 60px;
  background-color: ${({ active }) => (active ? "#ddf" : "#eee")};
  cursor: pointer;
`;

const TabItem = ({ title, index, active, onCLick, ...props }) => {
  return (
    <TabItemWrapper active={active} {...props}>
      <Text strong={active}>{title}</Text>
    </TabItemWrapper>
  );
};

TabItem.defaultProps = {
  __TYPE: "Tab.Item",
};

TabItem.propTypes = {
  __TYPE: PropTypes.oneOf(["Tab.Item"]),
};

export default TabItem;
```

```jsx
// index.js
import styled from "@emotion/styled";
import React, { useMemo, useState } from "react";
import TabItem from "./TabItem";

const childrenToArray = (children, types) => {
  return React.Children.toArray(children).filter((element) => {
    if (React.isValidElement(element) && types.includes(element.props.__TYPE)) {
      return true;
    }

    console.warn(
      `Only accepts ${Array.isArray(types) ? types.join(", ") : types}
			 as it's children.`
    );

    return false;
  });
};

const TabItemContainer = styled.div`
  border: 2px solid #ddd;
  background-color: #eee;
`;

const Tab = ({ children, active, ...props }) => {
  const [currentActive, setCurrentActive] = useState(() => {
    if (active) return active;
    else {
      const index = childrenToArray(children, "Tab.Item")[0].props.index;
      return index;
    }
  });

  const items = useMemo(() => {
    return childrenToArray(children, "Tab.Item").map((element) => {
      return React.cloneElement(element, {
        ...element.props,
        key: element.props.index,
        active: element.props.index === currentActive,
        onClick: () => {
          setCurrentActive(element.props.index);
        },
      });
    });
  }, [children, currentActive]);

  const activeItem = useMemo(
    () => items.find((element) => currentActive === element.props.index),
    [currentActive, items]
  );

  return (
    <div>
      <TabItemContainer>{items}</TabItemContainer>
      <div>{activeItem.props.children}</div>
    </div>
  );
};

Tab.Item = TabItem;

export default Tab;
```

<br><br><br>

# [2] ì‚¬ìš©ì ì •ì˜ Hook ì‹¤ìŠµ

ì‚¬ìš©ì ì •ì˜ í›…ë„ storybookì—ì„œ ë°”ë¡œ í™•ì¸í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì˜¤ëŠ˜ ì²˜ìŒ ì•Œì•˜ë‹¤.

ìŠ¤í† ë¦¬ë¶ì€,, ì»´í¬ë„ŒíŠ¸ì˜ êµ¬ì¡°, ë‹¨ìœ„ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì•½ê°„ì˜ ê³ ì •ê´€ë…ì´ ìˆì—ˆë˜ ê²ƒ ê°™ë‹¤.

<br><br>

## useHover

```jsx
// useHover.js
import { useCallback, useEffect, useState, useRef } from "react";

const useHover = () => {
  const [state, setState] = useState(false);
  const ref = useRef(null);

  const handleMouseOver = useCallback(() => setState(true), []);
  const handleMouseOut = useCallback(() => setState(false), []);

  useEffect(() => {
    const element = ref.current;
    if (!element) return;

    element.addEventListener("mouseover", handleMouseOver);
    element.addEventListener("mouseout", handleMouseOut);

    return () => {
      element.removeEventListener("mouseover", handleMouseOver);
      element.removeEventListener("mouseout", handleMouseOut);
    };
  }, [ref, handleMouseOver, handleMouseOut]);

  return [ref, state];
};

export default useHover;
```

```jsx
// useHover.stories.js
import styled from "@emotion/styled";
import useHover from "../../hooks/useHover";

export default {
  title: "Hook/useHover",
};

const Box = styled.div`
  width: 100px;
  height: 100px;
  background-color: tomato;
`;

export const Default = () => {
  const [ref, hover] = useHover();

  return (
    <>
      <Box ref={ref} />
      {hover ? <div>HOVER</div> : ""}
    </>
  );
};
```

<br><br>

## useScroll

```jsx
// useScroll.js
import { useEffect, useRef } from "react";
import useRafState from "./useRafState";

const useScroll = () => {
  const [state, setState] = useRafState({ x: 0, y: 0 });
  const ref = useRef(null);

  useEffect(() => {
    const element = ref.current;
    if (!element) return;

    const handleScroll = () => {
      setState({
        x: ref.current.scrollLeft,
        y: ref.current.scrollTop,
      });
    };

    element.addEventListener("scroll", handleScroll, { passive: true });
    return () => {
      element.removeEventListener("scroll", handleScroll);
    };
  }, [ref]);

  return [ref, state];
};

export default useScroll;
```

```jsx
// useScroll.stories.js
import styled from "@emotion/styled";
import useScroll from "../../hooks/useScroll";

export default {
  title: "Hook/useScroll",
};

const Box = styled.div`
  width: 100px;
  height: 100px;
  background-color: red;
  overflow: auto;
`;

const Inner = styled.div`
  width: 10000px;
  height: 10000px;
  background-image: linear-gradient(180deg, #000 0%, #fff 100%);
`;

export const Default = () => {
  const [ref, coord] = useScroll();
  return (
    <>
      <Box ref={ref}>
        <Inner />
      </Box>
      <button
        onClick={() => {
          ref.current.scrollTo({ top: 20000, left: 20000, behavior: "smooth" });
        }}
      >
        Scroll
      </button>
      {coord.x}, {coord.y}
    </>
  );
};
```

<br><br>

## useKey, useKeyPress

<br>

- useKey

```jsx
// useKey.js
import { useCallback, useEffect } from "react";

const useKey = (event = "keydown", targetKey, handler) => {
  const handleKey = useCallback(
    ({ key }) => {
      if (key === targetKey) {
        handler();
      }
    },
    [targetKey, handler]
  );

  useEffect(() => {
    window.addEventListener(event, handleKey);

    return () => {
      window.removeEventListener(event, handleKey);
    };
  }, [event, targetKey, handleKey]);
};

export default useKey;
```

```jsx
// useKey.stories.js
import useKey from "../../hooks/useKey";

export default {
  title: "Hook/useKey",
};

export const Default = () => {
  useKey("keydown", "f", () => {
    alert("f keydown Event!");
  });

  useKey("keyup", "q", () => {
    alert("q keyup Event!");
  });
  return <>useKey</>;
};
```

<br>

- useKeyPress

```jsx
import { useCallback, useEffect, useState } from "react";

const useKeyPress = (targetKey) => {
  const [keyPressed, setKeyPressed] = useState(false);

  const handleKeyDown = useCallback(
    ({ key }) => {
      if (key === targetKey) {
        setKeyPressed(true);
      }
    },
    [targetKey]
  );

  const handleKeyUp = useCallback(
    ({ key }) => {
      if (key === targetKey) {
        setKeyPressed(false);
      }
    },
    [targetKey]
  );

  useEffect(() => {
    window.addEventListener("keydown", handleKeyDown);
    window.addEventListener("keyup", handleKeyUp);

    return () => {
      window.removeEventListener("keydown", handleKeyDown);
      window.removeEventListener("keyup", handleKeyUp);
    };
  }, [handleKeyDown, handleKeyUp]);

  return keyPressed;
};

export default useKeyPress;
```

```jsx
import useKeyPress from "../../hooks/useKeyPress";

export default {
  title: "Hook/useKeyPress",
};

export const Default = () => {
  const pressed = useKeyPress("?");
  return <>{pressed ? "Peeo-A-Bool" : "Press ? Key"}</>;
};
```

<br><br>

## useClickAway

```jsx
// useClickAway.js
import { useEffect, useRef } from "react";

const events = ["mousedown", "touchstart"];

const useClickAway = (handler) => {
  const ref = useRef(null);
  const savedHandler = useRef(handler);
  // ìµœì í™”ë¥¼ ìœ„í•´ useRefë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
  // ì´ë²¤íŠ¸ê°€ ë³€ê²½ë  ê²½ìš° ì „ì²´ê°€ ì¬ë Œë”ë§ ë˜ëŠ” ì„±ëŠ¥ ì €í•˜ ìš”ì¸ì„ í•´ê²°í•œë‹¤.

  useEffect(() => {
    savedHandler.current = handler;
  }, [handler]);

  useEffect(() => {
    const element = ref.current;
    if (!element) return;

    const handleEvent = (e) => {
      !element.contains(e.target) && savedHandler.current(e);
    };

    for (const eventName of events) {
      document.addEventListener(eventName, handleEvent);
    }

    return () => {
      for (const eventName of events) {
        document.removeEventListener(eventName, handleEvent);
      }
    };
  }, [ref]);

  return ref;
};

export default useClickAway;
```

```jsx
{% raw %}
// useClickAway.stories.js
import { useState } from "react";
import styled from "@emotion/styled";
import useClickAway from "../../hooks/useClickAway";

export default {
  title: "Hook/useClickAway",
};

const Popover = styled.div`
  width: 200px;
  height: 200px;
  border: 2px solid black;
  background-color: #44d;
`;

export const Default = () => {
  const [show, setShow] = useState(false);
  const ref = useClickAway((e) => {
    if (e.target.tagName !== "BUTTON") setShow(false);
  });

  return (
    <div>
      <button onClick={() => setShow(true)}>Show</button>
      <Popover ref={ref} style={{ display: show ? "block" : "none" }}>
        Popover
      </Popover>
    </div>
  );
};
{% endraw %}
```

<br><br><br>

---

### ì¶œì²˜

[í”„ë¡œê·¸ë˜ë¨¸ìŠ¤](https://programmers.co.kr/)
